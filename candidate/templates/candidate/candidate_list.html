{% extends "screening/base.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'dashboard/vendor/libs/select2/select2.css' %}" />
    <link rel="stylesheet" href="{% static 'dashboard/vendor/libs/bootstrap-select/bootstrap-select.css' %}" />
{% endblock css %}

{% block content %}

<div class="card">
    <div class="card-datatable table-responsive pt-0">
        <div class="d-none">
            <button id="button_datatable" onclick="location.href = '{% url 'candidate-create' %}'" class="btn btn-secondary create-new btn-primary waves-effect waves-light" tabindex="0" aria-controls="DataTables_Table_0" type="button">
                <span><i class="ti ti-plus me-sm-1"></i>
                    <span class="d-none d-sm-inline-block">New Candidate</span>
                </span>
            </button>
        </div>

        <!-- Filter and Action Buttons -->
        <div id="filter-container" class="mb-2">
            <div class="row">
                <div class="col-md-12">
                    <div class="d-flex align-items-center gap-2 mb-3" style="margin-top: 15px;">
                        <!-- Action Button -->
                        <div class="btn-group">
                            <button type="button" id="actioncheck" class="btn btn-outline-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                Action
                            </button>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="javascript:void(0);" class="dropdown-item d-flex align-items-center">
                                        <i class="ti ti-plus scaleX-n1-rtl me-2"></i>Add to Job Opening
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item d-flex align-items-center text-danger" data-bs-toggle="modal" data-bs-target="#basicModal">
                                        <i class="ti ti-trash scaleX-n1-rtl me-2"></i>Delete
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <!-- Status Filter -->
                        <div class="btn-group">
                            <button type="button" class="btn btn-outline-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                Status
                            </button>
                            <ul class="dropdown-menu" id="filter-status">
                                <li>
                                    <div class="form-check dropdown-item">
                                        <label class="form-check-label custom-option-content">
                                            <input type="checkbox" class="form-check-input mx-1" data-value="Hired">Hired
                                        </label>
                                    </div>
                                    <div class="form-check dropdown-item">
                                        <label class="form-check-label custom-option-content">
                                            <input type="checkbox" class="form-check-input mx-1" data-value="In Stage">In Stage
                                        </label>
                                    </div>
                                    <div class="form-check dropdown-item">
                                        <label class="form-check-label custom-option-content">
                                            <input type="checkbox" class="form-check-input mx-1" data-value="Rejected">Rejected
                                        </label>
                                    </div>
                                    <div class="form-check dropdown-item">
                                        <label class="form-check-label custom-option-content">
                                            <input type="checkbox" class="form-check-input mx-1" data-value="Applied">Applied
                                        </label>
                                    </div>
                                    <div class="form-check dropdown-item">
                                        <label class="form-check-label custom-option-content">
                                            <input type="checkbox" class="form-check-input mx-1" data-value="Still">Still
                                        </label>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <!-- Experience Filter -->
                        <div class="input-group">
                            <button type="button" class="btn btn-outline-primary">Experience</button>
                            <button type="button" class="btn btn-outline-primary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
                                <span class="visually-hidden">Toggle Dropdown</span>
                            </button>
                            <ul class="dropdown-menu" id="experience-comparator">
                                <li><a class="dropdown-item" href="javascript:void(0);" data-comparator="<">&lt; </a></li>
                                <li><a class="dropdown-item" href="javascript:void(0);" data-comparator=">">&gt; </a></li>
                                <li><a class="dropdown-item" href="javascript:void(0);" data-comparator="=">= </a></li>
                            </ul>
                            <input type="text" class="form-control form-control-sm" aria-label="Text input with segmented dropdown button" id="experience-input" style="width: 50px;" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <table class="datatables-basic table">
          <thead>
            <tr>
              <th></th>
              <th></th>
              <th>Name</th>
              <th>Designation</th>
              <th>Contact</th>
              <th>Email</th>
              <th>Experience (in years)</th>
              <th>Status</th>
              <th>Updated</th>
            </tr>
          </thead>
          <tbody>
            {% for candidate in candidates %}
            <tr data-id="{{candidate.id}}">
                <td></td>
                <td>{{ candidate.id }}</td>
                <td><a href="{% url 'candidate-details' candidate.id %}">{{candidate.name}}</a></td>
                <td>{{candidate.current_designation}}</td>
                <td>{{candidate.contact}}</td>
                <td>{{candidate.email}}</td>
                <td>{{candidate.experience}}</td>
                <td>{% for stage in candidate.candidatestage_set.all %} {{stage.stage.name}} {% endfor %}</td>
                <td>{{candidate.updated|date:"F j, Y"}}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
    </div>
</div>

{% endblock content %}

{% block js %}
    <script src="{% static 'dashboard/js/tables-datatables-basic.js' %}"></script>
    <script src="{% static 'dashboard/js/forms-selects.js' %}"></script>
    <script src="{% static 'dashboard/vendor/libs/bootstrap-select/bootstrap-select.js' %}"></script>
    <script src="{% static 'dashboard/vendor/js/dropdown-hover.js' %}"></script>
    <script src="{% static 'dashboard/js/form-input-group.js' %}"></script>
{% endblock js %}
